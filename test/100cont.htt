INCLUDE $TOP/test/config.htb

CLIENT

_REQ $YOUR_HOST $YOUR_PORT
__POST /your/path/to/your/resource?your=params HTTP/1.1
__Host: $YOUR_HOST 
__Content-Length: 10 
__Expect: 100-Continue
__
_EXPECT . "HTTP/1.1 100 Continue"
_WAIT 0
__01234567

_WAIT

END

SERVER $YOUR_PORT

_RES
_WAIT 0 
__HTTP/1.1 100 Continue 
__

_RES
_EXPECT . "01234567"
_RECV 10 
__HTTP/1.1 200 OK
__Content-Length: AUTO
__
__== OK ==

END

run 100cont_auto.htt                                                                	
Daemon start ...
_IF "$MAX_DURATION" MATCH "MAX_DURATION"
                                                SRV0-0 start on 0.0.0.0:8081
_SET MAX_DURATION=120000
_END IF
_SYS:SLEEP  120000
                                                _RES 
                        CLT0-0 start ...
                        _REQ 127.0.0.1 8081
                                                _MATCH headers "Content-Length: (.*)" CL
                        __POST /your/path/to/your/resource?your=params HTTP/1.1
                                                _WAIT 0 
                        __Host: 127.0.0.1 
                        __Content-Length: AUTO
                        __Expect: 100-Continue
                        __
                        __0123456789abcdefghijklmnopqrstuvwxyz
                        __0123456789abcdefghijklmnopqrstuvwxyz
                        __0123456789abcdefghijklmnopqrstuvwxyz
                        __0123456789abcdefghijklmnopqrstuvwxyz
                        _WAIT 
                        >POST /your/path/to/your/resource?your=params HTTP/1.1
                        >Host: 127.0.0.1 
                        >Content-Length: 152
                        >Expect: 100-Continue
                        >
                        headers "HTTP/1.1 100 Continue"
                        
                                                <POST /your/path/to/your/resource?your=params HTTP/1.1
                                                <Host: 127.0.0.1 
                                                <Content-Length: 152
                                                <Expect: 100-Continue
                                                <
                                                __HTTP/1.1 100 Continue 
                                                __
                                                _RES 
                                                >HTTP/1.1 100 Continue 
                                                >
                                                _EXPECT . "01234567"
                                                _RECV 152
                        <HTTP/1.1 100 Continue 
                        <
                        >0123456789abcdefghijklmnopqrstuvwxyz
                        >0123456789abcdefghijklmnopqrstuvwxyz
                        >0123456789abcdefghijklmnopqrstuvwxyz
                        >0123456789abcdefghijklmnopqrstuvwxyz
                                                <0123456789abcdefghijklmnopqrstuvwxyz
                                                <0123456789abcdefghijklmnopqrstuvwxyz
                                                <0123456789abcdefghijklmnopqrstuvwxyz
                                                <0123456789abcdefghijklmnopqrstuvwxyz
                                                __HTTP/1.1 200 OK
                                                __Content-Length: AUTO
                                                __
                                                __== OK ==
                                                >HTTP/1.1 200 OK
                                                >Content-Length: 10
                                                >
                                                >== OK ==
                        <HTTP/1.1 200 OK
                        <Content-Length: 10
                        <
                        <== OK == OK
